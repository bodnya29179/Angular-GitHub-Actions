name: Branch Name

on:
  pull_request:
    types: [ opened ]

jobs:
  branch_name_check:
    runs-on: ubuntu-latest
    steps:
      - name: "🔎 Check branch name"
        run: |
          branch_name=$(git symbolic-ref --short HEAD)
          if [[ ${#branch_name} -lt 10 ]]; then
            echo "️⛔ Error: Branch name must have at least 10 characters"
            exit 1
          fi

          if [[ ! $branch_name =~ ^(feature|bugfix|hotfix|custom|AN-\d+).*$ ]]; then
            echo "⛔ Error: Branch name does not meet the required pattern"
            exit 1
          fi
          
          echo "🙌 Branch name check passed successfully"
